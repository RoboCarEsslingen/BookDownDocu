<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 6 Get on the Road! | RoboCar project documentation</title>
  <meta name="description" content="Notes taken by Uwe for the RoboCar project">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 6 Get on the Road! | RoboCar project documentation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Notes taken by Uwe for the RoboCar project" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Get on the Road! | RoboCar project documentation" />
  
  <meta name="twitter:description" content="Notes taken by Uwe for the RoboCar project" />
  

<meta name="author" content="Uwe Sterr">


<meta name="date" content="2019-02-02">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="robocarLogBook.html">
<link rel="next" href="donkeyCar.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">RoboCar project documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Project RoboCar</a></li>
<li class="chapter" data-level="2" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>2</b> Resources</a><ul>
<li class="chapter" data-level="2.1" data-path="resources.html"><a href="resources.html#meetups"><i class="fa fa-check"></i><b>2.1</b> Meetups</a><ul>
<li class="chapter" data-level="2.1.1" data-path="resources.html"><a href="resources.html#esslinger-makerspace-projekt-autonomen-robocar-bauen"><i class="fa fa-check"></i><b>2.1.1</b> Esslinger Makerspace Projekt: Autonomen RoboCar bauen</a></li>
<li class="chapter" data-level="2.1.2" data-path="resources.html"><a href="resources.html#autonomous-mobility-berlin"><i class="fa fa-check"></i><b>2.1.2</b> Autonomous Mobility Berlin</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="resources.html"><a href="resources.html#robocar-projects"><i class="fa fa-check"></i><b>2.2</b> RoboCar projects</a><ul>
<li class="chapter" data-level="2.2.1" data-path="resources.html"><a href="resources.html#diy-robocars"><i class="fa fa-check"></i><b>2.2.1</b> DIY RoboCars</a></li>
<li class="chapter" data-level="2.2.2" data-path="resources.html"><a href="resources.html#donkey-car"><i class="fa fa-check"></i><b>2.2.2</b> Donkey car</a></li>
<li class="chapter" data-level="2.2.3" data-path="resources.html"><a href="resources.html#sunfounder-smart-video-car-kit-for-raspberry-pi-with-android-app"><i class="fa fa-check"></i><b>2.2.3</b> Sunfounder Smart Video Car Kit for Raspberry Pi with Android App</a></li>
<li class="chapter" data-level="2.2.4" data-path="resources.html"><a href="resources.html#kuman-professional-wifi-smart-robot-model-car-kit-videokamera-for-raspberry-pi-3"><i class="fa fa-check"></i><b>2.2.4</b> Kuman Professional WIFI Smart Robot Model Car Kit Videokamera for Raspberry Pi 3</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="resources.html"><a href="resources.html#hardware"><i class="fa fa-check"></i><b>2.3</b> Hardware</a><ul>
<li class="chapter" data-level="2.3.1" data-path="resources.html"><a href="resources.html#komponentenliste-fur-ein-ferngesteuertes-roboter-auto"><i class="fa fa-check"></i><b>2.3.1</b> KOMPONENTENLISTE FÜR EIN FERNGESTEUERTES ROBOTER AUTO</a></li>
<li class="chapter" data-level="2.3.2" data-path="resources.html"><a href="resources.html#motor-control"><i class="fa fa-check"></i><b>2.3.2</b> Motor control</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="resources.html"><a href="resources.html#simulators"><i class="fa fa-check"></i><b>2.4</b> Simulators</a><ul>
<li class="chapter" data-level="2.4.1" data-path="resources.html"><a href="resources.html#donkey-simulator"><i class="fa fa-check"></i><b>2.4.1</b> Donkey Simulator</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="resources.html"><a href="resources.html#software"><i class="fa fa-check"></i><b>2.5</b> Software</a><ul>
<li class="chapter" data-level="2.5.1" data-path="resources.html"><a href="resources.html#udacitiy-open-source-sdc"><i class="fa fa-check"></i><b>2.5.1</b> Udacitiy open source SDC</a></li>
<li class="chapter" data-level="2.5.2" data-path="resources.html"><a href="resources.html#connect-raspberry-with-xbox-controller"><i class="fa fa-check"></i><b>2.5.2</b> connect raspberry with xbox controller</a></li>
<li class="chapter" data-level="2.5.3" data-path="resources.html"><a href="resources.html#raspberry-pi-rc-control"><i class="fa fa-check"></i><b>2.5.3</b> RASPBERRY PI RC CONTROL</a></li>
<li class="chapter" data-level="2.5.4" data-path="resources.html"><a href="resources.html#python-class-to-support-xbox-360-controller-under-linux-on-raspberrypi"><i class="fa fa-check"></i><b>2.5.4</b> Python class to support xbox 360 controller under Linux on RaspberryPi</a></li>
<li class="chapter" data-level="2.5.5" data-path="resources.html"><a href="resources.html#xbox-driver-for-mac"><i class="fa fa-check"></i><b>2.5.5</b> xbox driver for mac</a></li>
<li class="chapter" data-level="2.5.6" data-path="resources.html"><a href="resources.html#konzept-fur-softwareschichten"><i class="fa fa-check"></i><b>2.5.6</b> Konzept für softwareschichten</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="experiences.html"><a href="experiences.html"><i class="fa fa-check"></i><b>3</b> Experiences gathered</a><ul>
<li class="chapter" data-level="3.1" data-path="experiences.html"><a href="experiences.html#install-donkey-car-on-mac"><i class="fa fa-check"></i><b>3.1</b> Install donkey car on Mac</a></li>
<li class="chapter" data-level="3.2" data-path="experiences.html"><a href="experiences.html#donkey-car-simulator"><i class="fa fa-check"></i><b>3.2</b> Donkey car simulator</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Theory.html"><a href="Theory.html"><i class="fa fa-check"></i><b>4</b> Theory</a><ul>
<li class="chapter" data-level="4.1" data-path="Theory.html"><a href="Theory.html#wiring-of-pca9685-with-l298n-h-bridge"><i class="fa fa-check"></i><b>4.1</b> Wiring of PCA9685 with L298N H-bridge</a></li>
<li class="chapter" data-level="4.2" data-path="Theory.html"><a href="Theory.html#sensor-fusion-of-lidar-and-camera-data"><i class="fa fa-check"></i><b>4.2</b> sensor fusion of LIDAR and camera data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="robocarLogBook.html"><a href="robocarLogBook.html"><i class="fa fa-check"></i><b>5</b> RoboCar Logbook</a><ul>
<li class="chapter" data-level="5.1" data-path="robocarLogBook.html"><a href="robocarLogBook.html#section"><i class="fa fa-check"></i><b>5.1</b> 15-02-2018</a><ul>
<li class="chapter" data-level="5.1.1" data-path="robocarLogBook.html"><a href="robocarLogBook.html#donkey-findcar"><i class="fa fa-check"></i><b>5.1.1</b> donkey findcar</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="robocarLogBook.html"><a href="robocarLogBook.html#build-sunfounder-car-17-02-2018"><i class="fa fa-check"></i><b>5.2</b> Build sunfounder car 17-02-2018</a><ul>
<li class="chapter" data-level="5.2.1" data-path="robocarLogBook.html"><a href="robocarLogBook.html#install-software-18-02-2018"><i class="fa fa-check"></i><b>5.2.1</b> install software 18-02-2018</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="robocarLogBook.html"><a href="robocarLogBook.html#viewing-a-list-of-available-python-versions"><i class="fa fa-check"></i><b>5.3</b> Viewing a list of available Python versions</a></li>
<li class="chapter" data-level="5.4" data-path="robocarLogBook.html"><a href="robocarLogBook.html#run-calibration"><i class="fa fa-check"></i><b>5.4</b> Run calibration</a></li>
<li class="chapter" data-level="5.5" data-path="robocarLogBook.html"><a href="robocarLogBook.html#mjpg-streamer-installation"><i class="fa fa-check"></i><b>5.5</b> MJPG-streamer Installation</a><ul>
<li class="chapter" data-level="5.5.1" data-path="robocarLogBook.html"><a href="robocarLogBook.html#testing"><i class="fa fa-check"></i><b>5.5.1</b> Testing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="get-on-the-road.html"><a href="get-on-the-road.html"><i class="fa fa-check"></i><b>6</b> Get on the Road!</a><ul>
<li class="chapter" data-level="6.1" data-path="get-on-the-road.html"><a href="get-on-the-road.html#install-carnd-term1"><i class="fa fa-check"></i><b>6.1</b> install carnd-term1</a></li>
<li class="chapter" data-level="6.2" data-path="get-on-the-road.html"><a href="get-on-the-road.html#install-xbox-360-controller"><i class="fa fa-check"></i><b>6.2</b> Install Xbox 360 controller</a></li>
<li class="chapter" data-level="6.3" data-path="get-on-the-road.html"><a href="get-on-the-road.html#implement-xbox-controller-as-input-in-client_app.py"><i class="fa fa-check"></i><b>6.3</b> Implement Xbox controller as input in client_App.py</a><ul>
<li class="chapter" data-level="6.3.1" data-path="get-on-the-road.html"><a href="get-on-the-road.html#make-steering-proportional-to-remote-control-lever-position"><i class="fa fa-check"></i><b>6.3.1</b> Make steering proportional to remote control lever position</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="get-on-the-road.html"><a href="get-on-the-road.html#GetIp"><i class="fa fa-check"></i><b>6.4</b> Get IP adress of raspi</a></li>
<li class="chapter" data-level="6.5" data-path="get-on-the-road.html"><a href="get-on-the-road.html#store-snapshots-of-video-stream-on-local-computer"><i class="fa fa-check"></i><b>6.5</b> Store snapshots of video stream on local computer</a><ul>
<li class="chapter" data-level="6.5.1" data-path="get-on-the-road.html"><a href="get-on-the-road.html#jie-hous-alternative"><i class="fa fa-check"></i><b>6.5.1</b> Jie Hou’s alternative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="donkeyCar.html"><a href="donkeyCar.html"><i class="fa fa-check"></i><b>7</b> Change to donkeycar</a><ul>
<li class="chapter" data-level="7.1" data-path="donkeyCar.html"><a href="donkeyCar.html#reason-for-changing-the-plattform"><i class="fa fa-check"></i><b>7.1</b> Reason for changing the plattform</a></li>
<li class="chapter" data-level="7.2" data-path="donkeyCar.html"><a href="donkeyCar.html#what-to-do"><i class="fa fa-check"></i><b>7.2</b> What to do</a></li>
<li class="chapter" data-level="7.3" data-path="donkeyCar.html"><a href="donkeyCar.html#rewiring-the-car"><i class="fa fa-check"></i><b>7.3</b> Rewiring the car</a><ul>
<li class="chapter" data-level="7.3.1" data-path="donkeyCar.html"><a href="donkeyCar.html#parts-list"><i class="fa fa-check"></i><b>7.3.1</b> Parts list</a></li>
<li class="chapter" data-level="7.3.2" data-path="donkeyCar.html"><a href="donkeyCar.html#why-not-using-pca9685"><i class="fa fa-check"></i><b>7.3.2</b> Why not using PCA9685</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="donkeyCar.html"><a href="donkeyCar.html#folders-created-during-installation-of-host-pc"><i class="fa fa-check"></i><b>7.4</b> Folders created during installation of host PC</a></li>
<li class="chapter" data-level="7.5" data-path="donkeyCar.html"><a href="donkeyCar.html#calibrate-the-car"><i class="fa fa-check"></i><b>7.5</b> Calibrate the car</a><ul>
<li class="chapter" data-level="7.5.1" data-path="donkeyCar.html"><a href="donkeyCar.html#throttle-calibration"><i class="fa fa-check"></i><b>7.5.1</b> Throttle Calibration</a></li>
<li class="chapter" data-level="7.5.2" data-path="donkeyCar.html"><a href="donkeyCar.html#configpyAfterCalib"><i class="fa fa-check"></i><b>7.5.2</b> Config.py after calibration</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="donkeyCar.html"><a href="donkeyCar.html#drive-your-car-with-web-interface"><i class="fa fa-check"></i><b>7.6</b> Drive your car with web interface</a><ul>
<li class="chapter" data-level="7.6.1" data-path="donkeyCar.html"><a href="donkeyCar.html#preparation-on-mac"><i class="fa fa-check"></i><b>7.6.1</b> Preparation on Mac</a></li>
<li class="chapter" data-level="7.6.2" data-path="donkeyCar.html"><a href="donkeyCar.html#preparation-on-raspberry"><i class="fa fa-check"></i><b>7.6.2</b> Preparation on Raspberry</a></li>
<li class="chapter" data-level="7.6.3" data-path="donkeyCar.html"><a href="donkeyCar.html#open-control-in-web-browser-on-mac"><i class="fa fa-check"></i><b>7.6.3</b> Open control in web browser on Mac</a></li>
<li class="chapter" data-level="7.6.4" data-path="donkeyCar.html"><a href="donkeyCar.html#setting-wifi-up-for-the-raspberry"><i class="fa fa-check"></i><b>7.6.4</b> Setting WIFI up for the raspberry</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="donkeyCar.html"><a href="donkeyCar.html#connecting-bluetooth-controller"><i class="fa fa-check"></i><b>7.7</b> Connecting bluetooth controller</a><ul>
<li class="chapter" data-level="7.7.1" data-path="donkeyCar.html"><a href="donkeyCar.html#BluetoothControllerInstall"><i class="fa fa-check"></i><b>7.7.1</b> Connect your bluetooth controller to the raspberry pi.</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="donkeyCar.html"><a href="donkeyCar.html#start-driving-or-training"><i class="fa fa-check"></i><b>7.8</b> Start driving or training</a><ul>
<li class="chapter" data-level="7.8.1" data-path="donkeyCar.html"><a href="donkeyCar.html#create-movie-from-tub-data"><i class="fa fa-check"></i><b>7.8.1</b> Create movie from tub data</a></li>
<li class="chapter" data-level="7.8.2" data-path="donkeyCar.html"><a href="donkeyCar.html#options-of-manage.py"><i class="fa fa-check"></i><b>7.8.2</b> Options of manage.py</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="donkeyCar.html"><a href="donkeyCar.html#tips-on-how-to-drive-during-training"><i class="fa fa-check"></i><b>7.9</b> Tips on how to drive during training</a><ul>
<li class="chapter" data-level="7.9.1" data-path="donkeyCar.html"><a href="donkeyCar.html#how-to-edit-recorded-data"><i class="fa fa-check"></i><b>7.9.1</b> How to edit recorded data</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="donkeyCar.html"><a href="donkeyCar.html#mange-recorded-data"><i class="fa fa-check"></i><b>7.10</b> Mange recorded data</a><ul>
<li class="chapter" data-level="7.10.1" data-path="donkeyCar.html"><a href="donkeyCar.html#archiving-data"><i class="fa fa-check"></i><b>7.10.1</b> Archiving data</a></li>
<li class="chapter" data-level="7.10.2" data-path="donkeyCar.html"><a href="donkeyCar.html#delete-data"><i class="fa fa-check"></i><b>7.10.2</b> Delete data</a></li>
<li class="chapter" data-level="7.10.3" data-path="donkeyCar.html"><a href="donkeyCar.html#copy-files-from-raspi-to-mac"><i class="fa fa-check"></i><b>7.10.3</b> Copy files from raspi to mac</a></li>
<li class="chapter" data-level="7.10.4" data-path="donkeyCar.html"><a href="donkeyCar.html#how-big-is-the-tub-folder"><i class="fa fa-check"></i><b>7.10.4</b> How big is the tub folder</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html"><i class="fa fa-check"></i><b>8</b> Donkey Command-line Utilities</a><ul>
<li class="chapter" data-level="8.1" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#create-car"><i class="fa fa-check"></i><b>8.1</b> Create Car</a></li>
<li class="chapter" data-level="8.2" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#find-car"><i class="fa fa-check"></i><b>8.2</b> Find Car</a></li>
<li class="chapter" data-level="8.3" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#calibrate-car"><i class="fa fa-check"></i><b>8.3</b> Calibrate Car</a></li>
<li class="chapter" data-level="8.4" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#clean-data-in-tub"><i class="fa fa-check"></i><b>8.4</b> Clean data in Tub</a></li>
<li class="chapter" data-level="8.5" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#make-movie-from-tub"><i class="fa fa-check"></i><b>8.5</b> Make Movie from Tub</a></li>
<li class="chapter" data-level="8.6" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#tubclean"><i class="fa fa-check"></i><b>8.6</b> Check Tub</a></li>
<li class="chapter" data-level="8.7" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#histogram"><i class="fa fa-check"></i><b>8.7</b> Histogram</a></li>
<li class="chapter" data-level="8.8" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#plot-predictions"><i class="fa fa-check"></i><b>8.8</b> Plot Predictions</a></li>
<li class="chapter" data-level="8.9" data-path="donkey-command-line-utilities.html"><a href="donkey-command-line-utilities.html#simulation-server"><i class="fa fa-check"></i><b>8.9</b> Simulation Server</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html"><i class="fa fa-check"></i><b>9</b> Donkeycar software analysis</a><ul>
<li class="chapter" data-level="9.1" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#how-to-add-parts-to-a-vehicle"><i class="fa fa-check"></i><b>9.1</b> How to add parts to a vehicle</a><ul>
<li class="chapter" data-level="9.1.1" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#function-v.start"><i class="fa fa-check"></i><b>9.1.1</b> Function V.start()</a></li>
<li class="chapter" data-level="9.1.2" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#function-v.update_parts"><i class="fa fa-check"></i><b>9.1.2</b> Function V.update_parts()</a></li>
<li class="chapter" data-level="9.1.3" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#function-v.add"><i class="fa fa-check"></i><b>9.1.3</b> Function V.add</a></li>
<li class="chapter" data-level="9.1.4" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#threadedParts"><i class="fa fa-check"></i><b>9.1.4</b> Concept of threads vs non-threaded parts</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#structure-of-manage.py"><i class="fa fa-check"></i><b>9.2</b> Structure of <code>manage.py</code></a><ul>
<li class="chapter" data-level="9.2.1" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#creating-manage.py"><i class="fa fa-check"></i><b>9.2.1</b> Creating <code>manage.py</code></a></li>
<li class="chapter" data-level="9.2.2" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#starting-manage.py"><i class="fa fa-check"></i><b>9.2.2</b> Starting <code>manage.py</code></a></li>
<li class="chapter" data-level="9.2.3" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#parsing-the-command-line-parameters"><i class="fa fa-check"></i><b>9.2.3</b> Parsing the command line parameters</a></li>
<li class="chapter" data-level="9.2.4" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#function-drive"><i class="fa fa-check"></i><b>9.2.4</b> Function <code>drive</code></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#locate-modules-on-raspi-which-are-being-imported-by-manage.py"><i class="fa fa-check"></i><b>9.3</b> Locate modules on raspi which are being imported by manage.py</a></li>
<li class="chapter" data-level="9.4" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#assignment-of-wiiu-controller-sticks-to-action"><i class="fa fa-check"></i><b>9.4</b> Assignment of WiiU controller sticks to action</a></li>
<li class="chapter" data-level="9.5" data-path="donkeycar-software-analysis.html"><a href="donkeycar-software-analysis.html#setMaxVel"><i class="fa fa-check"></i><b>9.5</b> Limit max velocity</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="useful-links.html"><a href="useful-links.html"><i class="fa fa-check"></i><b>10</b> Useful links</a><ul>
<li class="chapter" data-level="10.1" data-path="useful-links.html"><a href="useful-links.html#donkey-car-1"><i class="fa fa-check"></i><b>10.1</b> Donkey car</a><ul>
<li class="chapter" data-level="10.1.1" data-path="useful-links.html"><a href="useful-links.html#videos-for-donkey-car"><i class="fa fa-check"></i><b>10.1.1</b> Videos for donkey car</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="useful-links.html"><a href="useful-links.html#parts-to-build-a-robocar"><i class="fa fa-check"></i><b>10.2</b> Parts to build a RoboCar</a></li>
<li class="chapter" data-level="10.3" data-path="useful-links.html"><a href="useful-links.html#little-setup-helpers"><i class="fa fa-check"></i><b>10.3</b> Little setup helpers</a></li>
<li class="chapter" data-level="10.4" data-path="useful-links.html"><a href="useful-links.html#meetup-in-stuttgart-area"><i class="fa fa-check"></i><b>10.4</b> Meetup in Stuttgart area</a></li>
<li class="chapter" data-level="10.5" data-path="useful-links.html"><a href="useful-links.html#other-robocar-projects"><i class="fa fa-check"></i><b>10.5</b> Other RoboCar projects</a></li>
<li class="chapter" data-level="10.6" data-path="useful-links.html"><a href="useful-links.html#write-ups-on-donkeycar-projects"><i class="fa fa-check"></i><b>10.6</b> Write ups on Donkeycar projects</a></li>
<li class="chapter" data-level="10.7" data-path="useful-links.html"><a href="useful-links.html#other-stuff"><i class="fa fa-check"></i><b>10.7</b> Other stuff</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/RoboCarEsslingen" target="blank">Related files on Github</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RoboCar project documentation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="get-on-the-road" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Get on the Road!</h1>
<p>Use two terminals for raspberry</p>
<p>first teminal run jgp streamer</p>
<pre><code>cd /home/pi/Sunfounder_Smart_Video_Car_Kit_for_RaspberryPi/mjpg-streamer/mjpg-streamer
sudo sh start.sh</code></pre>
<p>second terminal run tcp_server.py:</p>
<pre><code>cd ~/Sunfounder_Smart_Video_Car_Kit_for_RaspberryPi/server
sudo python tcp_server.py
</code></pre>
<p>on mac terminal in environment sunfounderPy27</p>
<p>Type in the following address at the address bar of your browser (Firefox is recommended):</p>
<pre><code>http://192.168.178.67:8080/stream.html</code></pre>
<pre><code>source activate sunfounderPy27</code></pre>
<p>or if openCV is needed</p>
<pre><code>source activate carnd-term1 </code></pre>
<div id="install-carnd-term1" class="section level2">
<h2><span class="header-section-number">6.1</span> install carnd-term1</h2>
<pre><code>git clone https://github.com/udacity/CarND-Term1-Starter-Kit.git
cd CarND-Term1-Starter-Kit
conda env create -f environment.yml
conda install -c anaconda tk 
</code></pre>
<pre><code> cd /Users/uwesterr/CloudProjectsUnderWork/ProjectsUnderWork/RoboCar/sunfounder/Sunfounder_Smart_Video_Car_Kit_for_RaspberryPi/client 
 sudo python client_App.py</code></pre>
</div>
<div id="install-xbox-360-controller" class="section level2">
<h2><span class="header-section-number">6.2</span> Install Xbox 360 controller</h2>
<p>install Xbox 360 controller drive on mac <a href="https://github.com/360Controller/360Controller/releases" class="uri">https://github.com/360Controller/360Controller/releases</a></p>
<p><strong>NOTE!!!</strong><br />
<strong>it seems necessary to have the controller plugged into the USB port during boot up</strong></p>
<p>According to <a href="http://www.philipzucker.com/python-xbox-controller-mac/" class="uri">http://www.philipzucker.com/python-xbox-controller-mac/</a> Install pygame</p>
<pre><code>python -m pip install -U pygame --user</code></pre>
<p>or</p>
<pre><code>brew upgrade sdl sdl_image sdl_mixer sdl_ttf portmidi
python3.6 -m venv anenv
. ./anenv/bin/activate
pip install https://github.com/pygame/pygame/archive/master.zip</code></pre>
<p>create a jupyter notebook “xboxControllerOnMac.ipynb”&quot; with</p>
<pre><code>import pygame
import sys
import time
import socket
import cPickle as pickle
 
UDP_IP = &quot;127.0.0.1&quot;
UDP_PORT = 5005
MESSAGE = &quot;Hello, World!&quot;
 
print &quot;UDP target IP:&quot;, UDP_IP
print &quot;UDP target port:&quot;, UDP_PORT
print &quot;message:&quot;, MESSAGE
 
sock = socket.socket(socket.AF_INET, # Internet
                     socket.SOCK_DGRAM) # UDP
 
 
 
pygame.init()
 
pygame.joystick.init()
clock = pygame.time.Clock()
 
print pygame.joystick.get_count()
_joystick = pygame.joystick.Joystick(0)
_joystick.init()</code></pre>
<p>gives:</p>
<blockquote>
<p>UDP target IP: 127.0.0.1<br />
UDP target port: 5005<br />
message: Hello, World!<br />
1</p>
</blockquote>
<p>watch out for the “1” which indicates that the controller was identified</p>
<pre><code>while 1:
    for event in pygame.event.get():
        if event.type == pygame.JOYBUTTONDOWN:
            print(&quot;Joystick button pressed.&quot;)
            print event
        if event.type == pygame.JOYAXISMOTION:
            #print _joystick.get_axis(0)
            #print event
            if event.axis == 0: # this is the x axis
                print event.value
            if event.axis == 5: # right trigger
                print event.value
    xdir = _joystick.get_axis(0)
 
    rtrigger = _joystick.get_axis(5)
    #deadzone
    if abs(xdir) &lt; 0.2:
        xdir = 0.0
    if rtrigger &lt; -0.9:
        rtrigger = -1.0
 
    MESSAGE = pickle.dumps([xdir,rtrigger])
    sock.sendto(MESSAGE, (UDP_IP, UDP_PORT))
 
    clock.tick(30)</code></pre>
<p>when using controller the following output was created</p>
<blockquote>
<p>0.00781273842586<br />
-1.00003051851<br />
Joystick button pressed.<br />
<Event(10-JoyButtonDown {'joy': 0, 'button': 6})><br />
0.0<br />
0.00781273842586<br />
Joystick button pressed.<br />
<Event(10-JoyButtonDown {'joy': 0, 'button': 12})><br />
0.0312509537034</p>
</blockquote>
</div>
<div id="implement-xbox-controller-as-input-in-client_app.py" class="section level2">
<h2><span class="header-section-number">6.3</span> Implement Xbox controller as input in client_App.py</h2>
<p>In client_App.py the part for driving forward extracted</p>
<pre><code>from Tkinter import *
from socket import *      # Import necessary modules

ctrl_cmd = [&#39;forward&#39;, &#39;backward&#39;, &#39;left&#39;, &#39;right&#39;, &#39;stop&#39;, &#39;read cpu_temp&#39;, &#39;home&#39;, &#39;distance&#39;, &#39;x+&#39;, &#39;x-&#39;, &#39;y+&#39;, &#39;y-&#39;, &#39;xy_home&#39;]

top = Tk()   # Create a top window
top.title(&#39;Sunfounder Raspberry Pi Smart Video Car&#39;)

HOST = &#39;192.168.178.67&#39;    # Server(Raspberry Pi) IP address
PORT = 21567
BUFSIZ = 1024             # buffer size
ADDR = (HOST, PORT)

tcpCliSock = socket(AF_INET, SOCK_STREAM)   # Create a socket
tcpCliSock.connect(ADDR)                    # Connect with the server

# =============================================================================
# The function is to send the command forward to the server, so as to make the 
# car move forward.
# ============================================================================= 
def forward_fun(event):
    print &#39;forward&#39;
    tcpCliSock.send(&#39;forward&#39;)</code></pre>
<p>then keystrokes are binded to the forward function, this needs to be changed to bind Xbox controller values to the function</p>
<pre><code># =============================================================================
# Bind buttons on the keyboard with the corresponding callback function to 
# control the car remotely with the keyboard.
# =============================================================================
top.bind(&#39;&lt;KeyPress-w&gt;&#39;, forward_fun)   # Press down key &#39;w&#39; on the keyboard and the car will drive forward.</code></pre>
<p>from <a href="https://github.com/martinohanlon/XboxController/blob/master/XboxController.py" class="uri">https://github.com/martinohanlon/XboxController/blob/master/XboxController.py</a></p>
<blockquote>
<p>JOYAXISMOTION<br />
event.axis event.value<br />
0 - x axis left thumb (+1 is right, -1 is left)<br />
1 - y axis left thumb (+1 is down, -1 is up)<br />
2 - x axis right thumb (+1 is right, -1 is left)<br />
3 - y axis right thumb (+1 is down, -1 is up)<br />
4 - right trigger<br />
5 - left trigger</p>
</blockquote>
<blockquote>
<p>JOYBUTTONDOWN | JOYBUTTONUP<br />
event.button<br />
A = 0<br />
B = 1<br />
X = 2<br />
Y = 3<br />
LB = 4<br />
RB = 5<br />
BACK = 6<br />
START = 7<br />
XBOX = 8<br />
LEFTTHUMB = 9<br />
RIGHTTHUMB = 10</p>
</blockquote>
<div id="make-steering-proportional-to-remote-control-lever-position" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Make steering proportional to remote control lever position</h3>
<p>change code from</p>
<pre><code>if event.axis == 0: # this is the x axis
        if event.value &gt; thresSteerHigh:
           tcpCliSock.send(&#39;right&#39;)
      if event.value &lt; thresSteerLow:
           tcpCliSock.send(&#39;left&#39;) </code></pre>
<p>to</p>
<pre><code>if event.axis == 0: # this is the x axis
        if event.value &gt; thresSteerHigh:
       tcpCliSock.send(&#39;right&#39;)
         angle = int(100*abs(event.value))
       data = tmp1 + str(angle)  
             print &#39;sendData = %s&#39; % data
             tcpCliSock.send(data)  # Send the speed data to the server(Raspberry Pi)
        if event.value &lt; thresSteerLow:
           tcpCliSock.send(&#39;left&#39;) 
           angle = int(-100*abs(event.value))
             data = tmp1 + str(angle)  
             print &#39;sendData = %s&#39; % data
             tcpCliSock.send(data)  # Send the speed data to the server(Raspberry Pi)</code></pre>
</div>
</div>
<div id="GetIp" class="section level2">
<h2><span class="header-section-number">6.4</span> Get IP adress of raspi</h2>
<p>Check in the router for the IP adress, procedure is dependent on router At shackspace go to <a href="http://leases.shack/#/" class="uri">http://leases.shack/#/</a> (only available from the shackspace network)</p>
<p>and then connect via ssh <a href="mailto:pi@ipAdress">pi@ipAdress</a></p>
<p>if you get</p>
<pre><code>Uwes-MBP:data uwesterr$ ssh pi@10.42.26.33
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the ECDSA key sent by the remote host is
SHA256:aYMRAzv3GpxqJNugz1oTi20m0QKVIVfVxszQkJNbNqg.
Please contact your system administrator.
Add correct host key in /Users/uwesterr/.ssh/known_hosts to get rid of this message.
Offending ECDSA key in /Users/uwesterr/.ssh/known_hosts:20
ECDSA host key for 10.42.26.33 has changed and you have requested strict checking.
Host key verification failed.</code></pre>
<p>then you have to remove the cached key for donkeypi-uwe (or the old IP adress) on the local machine:</p>
<pre><code>ssh-keygen -R donkeypi-uwe</code></pre>
</div>
<div id="store-snapshots-of-video-stream-on-local-computer" class="section level2">
<h2><span class="header-section-number">6.5</span> Store snapshots of video stream on local computer</h2>
<p>Donkey car stores training data on raspi SD card. In this concept the XBox controller is connected via USB to a laptop (in my case a Mac) and it makes sense to store the traing data on the laptop as well since we anyway will train the NN on that machine.</p>
<p>The URL of the stream is:</p>
<p>*url = “<a href="http://10.42.26.33:8080/?action=stream%22*" class="uri">http://10.42.26.33:8080/?action=stream&quot;*</a></p>
<p>for a snapshot the URL is *url = “<a href="http://10.42.26.33:8080/?action=snapshot%22*" class="uri">http://10.42.26.33:8080/?action=snapshot&quot;*</a></p>
<p>check video <a href="https://youtu.be/2xcUzXataIk?t=556" class="uri">https://youtu.be/2xcUzXataIk?t=556</a> for a good explanation of how to receive an IP video stream. Based on that tutorial the follwing code now stores a single frame and shows that frame as well.</p>
<pre><code>import cv2
import numpy as np
import urllib
 
# based on example in https://www.youtube.com/watch?v=2xcUzXataIk 
url = &quot;http://192.168.178.67:8080/?action=snapshot&quot;  
imgNp = np.array(bytearray(imgResp.read()), dtype = np.uint8)
img = cv2.imdecode(imgNp,-1)
cv2.imshow(&quot;test&quot;,img)
cv2.imwrite( &quot;Snapshot.jpg&quot;, img );
cv2.waitKey(10000)</code></pre>
<div id="jie-hous-alternative" class="section level3">
<h3><span class="header-section-number">6.5.1</span> Jie Hou’s alternative</h3>
<p>Jie has another solution for the same task, see <a href="https://drive.google.com/drive/folders/10U8ZTr_2HVnBWrFqvVFGO0UyQn0vCmiE" class="uri">https://drive.google.com/drive/folders/10U8ZTr_2HVnBWrFqvVFGO0UyQn0vCmiE</a></p>
<p>The code is</p>
<pre><code>import cv2
import numpy as np
try:
    from urllib.request import urlopen
except ImportError:
    from urllib2 import urlopen


print(&#39;# capture image from video #&#39;)
stream = urlopen(&#39;http://192.168.0.101:8080/?action=stream&#39;)
bytes = bytes()
FlagSaveImage = 0
while True:
    bytes += stream.read(1024)
    a = bytes.find(b&#39;\xff\xd8&#39;)
    b = bytes.find(b&#39;\xff\xd9&#39;)
    print(&#39; #a: &#39;, a, &#39; ,b: &#39;, b)
    if a != -1 and b != -1:
        jpg = bytes[a: b + 2]
        bytes = bytes[b+2:]
        image = cv2.imdecode(np.fromstring(jpg, dtype=np.uint8), cv2.IMREAD_COLOR)
        cv2.imshow(&#39;image&#39;, image)
        if FlagSaveImage == 0:
            cv2.imwrite(&#39;test.jpg&#39;, image)
            FlagSaveImage = 1
        if cv2.waitKey(1) == 27:
            exit(0)
</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="robocarLogBook.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="donkeyCar.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["RoboCarDokumentation.pdf", "RoboCarDokumentation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
